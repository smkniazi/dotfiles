#!/bin/sh

function help(){
	log "Usage : -l <repeat> -r <repeat> -u <repeat> -d <repeat>"
}

function send_key(){
	key=$1
	repeat=$2
	if [ "$repeat" -gt "0" ]; then
		for i in $(seq 1 $repeat)
		do  
			log "Key: $key, $i"
			#eval "xdotool windowactivate --sync 0x026000f8 key Up"
			exec key-up  
			log "done"
		done
	fi
}

function log(){
	message=$1
	echo -e    $1
	echo -e    $1 >> /tmp/mykeyboard.log
}

log ""
log "------------ Send Keys App ------------"

left=0
right=0
up=0
down=0

# A POSIX variable
OPTIND=1         # Reset in case getopts has been used previously in the shell.
while getopts ":l:r:u:d:" opt; do
    case "$opt" in
    l)  left=$OPTARG
        ;;
    r)  right=$OPTARG
        ;;
    u)  up=$OPTARG
        ;;
    d)  down=$OPTARG
        ;;
    *)
        help
        exit 0
        ;;
    esac
done
shift $((OPTIND-1))
[ "$1" = "--" ] && shift

log "-l:$left -r:$right -u:$up -d:$down"

send_key "Up" $up
send_key "Down" $down
send_key "Left" $left
send_key "Right" $right
